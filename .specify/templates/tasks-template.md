---

description: "機能実装のタスクリスト用テンプレート"
---

# タスク: [FEATURE NAME]

**入力**: `/specs/[###-feature-name]/` の設計ドキュメント
**前提**: plan.md（必須）、spec.md（ユーザーストーリーがある場合必須）、research.md、data-model.md、contracts/

**テスト**: 戦略評価、設定契約、観測性に影響する機能の場合はテストタスクを含めること。
それ以外は、仕様で明示された場合のみ任意で追加する。

**整理方針**: タスクはユーザーストーリー単位でグルーピングし、各ストーリーを独立して
実装・テストできるようにする。

## 形式: `[ID] [P?] [Story] 説明`

- **[P]**: 並列実行可能（別ファイル、依存なし）
- **[Story]**: どのユーザーストーリーに属するか（例: US1, US2, US3）
- 説明には正確なファイルパスを含める

## パス規約

- **単体プロジェクト**: リポジトリ直下に `src/`, `tests/`
- **Webアプリ**: `backend/src/`, `frontend/src/`
- **モバイル**: `api/src/`, `ios/src/` または `android/src/`
- 下記のパスは単体プロジェクト前提。plan.md の構成に合わせて調整する

<!--
  ============================================================================
  重要: 以下のタスクは例示用のサンプルタスクです。

  /speckit.tasks コマンドは、以下に基づいて実タスクに置き換える必要があります:
  - spec.md のユーザーストーリー（優先度 P1, P2, P3...）
  - plan.md の機能要件
  - data-model.md のエンティティ
  - contracts/ のエンドポイント

  タスクはユーザーストーリー単位で整理し、各ストーリーが:
  - 独立して実装できる
  - 独立してテストできる
  - MVP として提供できる

  生成された tasks.md にサンプルタスクを残さないこと。
  ============================================================================
-->

## フェーズ1: セットアップ（共通基盤）

**目的**: プロジェクト初期化と基本構成

- [ ] T001 実装計画に沿ったプロジェクト構成を作成
- [ ] T002 [言語] プロジェクトを [フレームワーク] 依存で初期化
- [ ] T003 [P] lint/format ツールを設定

---

## フェーズ2: 基盤（ブロッキング前提）

**目的**: どのユーザーストーリーよりも先に必須の基盤

**⚠️ 重要**: このフェーズが完了するまでユーザーストーリーの実装は開始しない

基盤タスクの例（必要に応じて調整）:

- [ ] T004 DB スキーマとマイグレーション基盤を設定
- [ ] T005 [P] 認証/認可フレームワークを実装
- [ ] T006 [P] API ルーティングとミドルウェア構成を作成
- [ ] T007 すべてのストーリーが依存する基本モデル/エンティティを作成
- [ ] T008 エラーハンドリングとログ基盤を設定
- [ ] T009 環境設定の管理を整備

**チェックポイント**: 基盤完了 - 以降のユーザーストーリーは並列で着手可能

---

## フェーズ3: ユーザーストーリー1 - [タイトル] (優先度: P1) 🎯 MVP

**ゴール**: [このストーリーが提供する内容]

**独立テスト**: [このストーリー単体の検証方法]

### ユーザーストーリー1のテスト（任意 - 仕様で要求された場合のみ） ⚠️

> **注記: これらのテストは先に書き、失敗することを確認してから実装する**

- [ ] T010 [P] [US1] `tests/contract/test_[name].py` に [endpoint] の契約テストを追加
- [ ] T011 [P] [US1] `tests/integration/test_[name].py` に [ユーザージャーニー] の統合テストを追加

### ユーザーストーリー1の実装

- [ ] T012 [P] [US1] `src/models/[entity1].py` に [エンティティ1] モデルを作成
- [ ] T013 [P] [US1] `src/models/[entity2].py` に [エンティティ2] モデルを作成
- [ ] T014 [US1] `src/services/[service].py` に [Service] を実装（T012, T013 に依存）
- [ ] T015 [US1] `src/[location]/[file].py` に [endpoint/feature] を実装
- [ ] T016 [US1] バリデーションとエラーハンドリングを追加
- [ ] T017 [US1] ユーザーストーリー1の操作ログを追加

**チェックポイント**: ユーザーストーリー1が独立して機能・検証可能な状態

---

## フェーズ4: ユーザーストーリー2 - [タイトル] (優先度: P2)

**ゴール**: [このストーリーが提供する内容]

**独立テスト**: [このストーリー単体の検証方法]

### ユーザーストーリー2のテスト（任意 - 仕様で要求された場合のみ） ⚠️

- [ ] T018 [P] [US2] `tests/contract/test_[name].py` に [endpoint] の契約テストを追加
- [ ] T019 [P] [US2] `tests/integration/test_[name].py` に [ユーザージャーニー] の統合テストを追加

### ユーザーストーリー2の実装

- [ ] T020 [P] [US2] `src/models/[entity].py` に [エンティティ] モデルを作成
- [ ] T021 [US2] `src/services/[service].py` に [Service] を実装
- [ ] T022 [US2] `src/[location]/[file].py` に [endpoint/feature] を実装
- [ ] T023 [US2] ユーザーストーリー1コンポーネントと統合（必要な場合）

**チェックポイント**: ユーザーストーリー1と2が独立して動作

---

## フェーズ5: ユーザーストーリー3 - [タイトル] (優先度: P3)

**ゴール**: [このストーリーが提供する内容]

**独立テスト**: [このストーリー単体の検証方法]

### ユーザーストーリー3のテスト（任意 - 仕様で要求された場合のみ） ⚠️

- [ ] T024 [P] [US3] `tests/contract/test_[name].py` に [endpoint] の契約テストを追加
- [ ] T025 [P] [US3] `tests/integration/test_[name].py` に [ユーザージャーニー] の統合テストを追加

### ユーザーストーリー3の実装

- [ ] T026 [P] [US3] `src/models/[entity].py` に [エンティティ] モデルを作成
- [ ] T027 [US3] `src/services/[service].py` に [Service] を実装
- [ ] T028 [US3] `src/[location]/[file].py` に [endpoint/feature] を実装

**チェックポイント**: すべてのユーザーストーリーが独立して機能

---

[必要に応じてユーザーストーリーのフェーズを追加]

---

## フェーズN: 仕上げと横断的改善

**目的**: 複数ストーリーにまたがる改善

- [ ] TXXX docs/ のドキュメント更新
- [ ] TXXX コード整理とリファクタリング
- [ ] TXXX 全ストーリー横断の性能最適化
- [ ] TXXX [P] 追加の単体テスト（要求がある場合）を `tests/unit/` に追加
- [ ] TXXX セキュリティ強化
- [ ] TXXX quickstart.md の検証を実行
- [ ] TXXX 挙動変更がある場合は `docs/04_operations/90_observability_and_testing.md`
  の観測性期待値を更新
- [ ] TXXX スキーマ変更時は `docs/03_design/` の契約と `meta.formatVersion` を更新

---

## 依存関係と実行順序

### フェーズ依存

- **セットアップ（フェーズ1）**: 依存なし - すぐに開始可能
- **基盤（フェーズ2）**: セットアップ完了が前提 - すべてのストーリーをブロック
- **ユーザーストーリー（フェーズ3+）**: 基盤完了が前提
  - 以降、ストーリーは並列に進められる（体制次第）
  - または優先度順に順次実施（P1 → P2 → P3）
- **仕上げ（最終フェーズ）**: 対象ストーリーの完了が前提

### ユーザーストーリー依存

- **ユーザーストーリー1（P1）**: 基盤完了後に開始可能 - 他ストーリーへの依存なし
- **ユーザーストーリー2（P2）**: 基盤完了後に開始可能 - US1 と連携しても独立テスト可能にする
- **ユーザーストーリー3（P3）**: 基盤完了後に開始可能 - US1/US2 と連携しても独立テスト可能にする

### 各ユーザーストーリー内

- テスト（含める場合）は先に書いて失敗を確認する
- モデル → サービス → エンドポイントの順
- コア実装 → 統合
- ストーリー完了後に次の優先度へ進む

### 並列化ポイント

- セットアップの [P] は並列実行可能
- 基盤フェーズの [P] は並列実行可能（フェーズ2内）
- 基盤完了後、各ユーザーストーリーは並列実行可能（体制次第）
- ストーリー内の [P] テストは並列実行可能
- ストーリー内の [P] モデルは並列実行可能
- 異なるユーザーストーリーは並列実行可能（担当分割）

---

## 並列実行の例: ユーザーストーリー1

```bash
# ユーザーストーリー1のテストを同時に実行（テストが要求された場合）:
タスク: "tests/contract/test_[name].py に [endpoint] の契約テストを追加"
タスク: "tests/integration/test_[name].py に [ユーザージャーニー] の統合テストを追加"

# ユーザーストーリー1のモデルを同時に作成:
タスク: "src/models/[entity1].py に [エンティティ1] モデルを作成"
タスク: "src/models/[entity2].py に [エンティティ2] モデルを作成"
```

---

## 実装戦略

### MVP優先（ユーザーストーリー1のみ）

1. フェーズ1: セットアップ
2. フェーズ2: 基盤（重要 - すべてのストーリーをブロック）
3. フェーズ3: ユーザーストーリー1
4. **停止して検証**: ユーザーストーリー1を独立してテスト
5. 準備ができたらデプロイ/デモ

### 段階的デリバリー

1. セットアップ + 基盤 → 基盤準備完了
2. ユーザーストーリー1追加 → 独立テスト → デプロイ/デモ（MVP）
3. ユーザーストーリー2追加 → 独立テスト → デプロイ/デモ
4. ユーザーストーリー3追加 → 独立テスト → デプロイ/デモ
5. 各ストーリーは前段を壊さず価値を追加

### 並列チーム戦略

複数人の場合:

1. セットアップ + 基盤を全員で完了
2. 基盤完了後:
   - 開発者A: ユーザーストーリー1
   - 開発者B: ユーザーストーリー2
   - 開発者C: ユーザーストーリー3
3. 各ストーリーが独立して完了・統合

---

## メモ

- [P] タスク = 別ファイル、依存なし
- [Story] ラベルでタスクとユーザーストーリーを対応付ける
- 各ユーザーストーリーは独立して完結・テスト可能にする
- 実装前にテストを失敗させることを確認する
- 仕様に明記がなくても、憲章で必須のテストは含める
- タスクや論理的なまとまりごとにコミットする
- チェックポイントで停止し、ストーリー単体で検証する
- 避けるべきこと: 曖昧なタスク、同一ファイル競合、独立性を壊す依存
