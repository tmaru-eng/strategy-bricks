# 機能仕様: 既存ドキュメント準拠の進行

**機能ブランチ**: `[001-use-existing-docs]`
**作成日**: 2026-01-22
**ステータス**: 下書き
**入力**: ユーザー説明: "既存のドキュメント内容を元にして進めて欲しいです。"

## ユーザーシナリオ & テスト *(必須)*

### ユーザーストーリー 1 - 合意事項の一元参照 (優先度: P1)

プロジェクト参加者として、既存ドキュメントに散在する合意事項・制約・用語を
一箇所で参照し、作業の前提を誤解なく確認したい。

**この優先度の理由**: 前提の不一致は後工程の手戻りに直結するため。

**独立テスト**: 合意事項の一覧を確認し、主要制約と参照元を一括で確認できる。

**受入シナリオ**:

1. **前提** 既存ドキュメントが揃っている, **操作** 合意事項の一覧を開く,
   **結果** 主要制約・契約・用語が列挙され、各項目に参照元が示される
2. **前提** 新規提案がある, **操作** 一覧と照合する,
   **結果** 矛盾・未記載の論点が明確に識別できる

---

### ユーザーストーリー 2 - 既存文書との整合判断 (優先度: P2)

レビュー担当として、新規提案や変更内容が既存ドキュメントに矛盾しないかを
短時間で判断したい。

**この優先度の理由**: レビュー遅延は計画全体に影響するため。

**独立テスト**: 提案内容を照合し、矛盾の有無と必要な更新先が判断できる。

**受入シナリオ**:

1. **前提** 提案内容が提示されている, **操作** 整合チェックを行う,
   **結果** 矛盾なし/要更新/未決の分類が明確になる

---

### ユーザーストーリー 3 - 未決事項の可視化 (優先度: P3)

意思決定者として、未決事項と仮定を一覧で把握し、次の判断材料にしたい。

**この優先度の理由**: 未決事項が埋もれると方針決定が遅れるため。

**独立テスト**: 未決事項一覧を確認し、影響範囲と優先度を把握できる。

**受入シナリオ**:

1. **前提** 未決事項が存在する, **操作** 未決事項一覧を確認する,
   **結果** 影響範囲と優先度が明示されている

---

### エッジケース

- 既存ドキュメント間で同じ用語に異なる定義がある場合はどう扱うか？
- 参照元ドキュメントが古い更新日で最新情報と矛盾している場合はどうするか？

## 要件 *(必須)*

### 機能要件

- **FR-001**: 既存ドキュメントから合意済みの制約・契約・用語を一覧化すること
- **FR-002**: 一覧の各項目に参照元ドキュメントと該当箇所を紐づけること
- **FR-003**: ドキュメント間の矛盾を抽出し、解決状態を明示すること
- **FR-004**: 未決事項と仮定を一覧化し、影響範囲と優先度を示すこと
- **FR-005**: 変更提案が既存制約に与える影響点（追加/変更/削除）を明確にすること
- **FR-006**: 合意事項/矛盾/未決事項の一覧は `docs/00_overview.md` に集約し、
  `docs/README.md` から参照できるようにすること
- **FR-007**: ドキュメント間の矛盾は優先順位を設けず、すべて「要判断」として記録すること
- **FR-008**: 未決事項には必ず担当者（owner）を設定すること
- **FR-009**: 整理対象は `docs/` 配下のみとし、`README.md` と `CLAUDE.md` は参照のみとする
- **FR-010**: 同じ用語に異なる定義がある場合は用語を統合し、単一定義に正規化する

### 主要エンティティ *(データがある場合のみ)*

- **ドキュメント**: 合意事項・制約・契約の情報源
- **合意事項**: 既に確定している制約や前提
- **矛盾**: 文書間で相反する記述
- **未決事項**: 決定待ちの論点と仮定

## 前提・依存関係

- 既存ドキュメント（`docs/` 配下）が合意の一次情報源であること
- 本機能は新たな要件追加を行わず、既存内容の整理と整合確認に限定すること
- 出力・運用は日本語で行うこと

## Clarifications

### Session 2026-01-22

- Q: 合意事項/矛盾/未決事項の一覧はどこに記載する運用にしますか？ → A: `docs/00_overview.md` に集約し、`docs/README.md` からリンクする
- Q: 文書間で矛盾が見つかった場合の優先順位ルールはどうしますか？ → A: 優先順位は設けず、すべて「要判断」として記録する
- Q: 未決事項の「担当者（owner）」は必須にしますか？ → A: 必須（必ず担当者を設定）
- Q: 今回の対象範囲はどこまでにしますか？ → A: `docs/` 配下のみ（`README.md` と `CLAUDE.md` は参照のみ）
- Q: 「同じ用語に異なる定義」が見つかった場合、どう扱いますか？ → A: 用語を統合し、単一定義に正規化する

## 憲章整合性 *(必須)*

- **該当する原則**: I. 契約優先ドキュメント、V. 追跡可能な判断と必須テスト
- **制約への影響**: 影響なし（M1/shift=1/同一足再エントリー禁止の内容整理のみ）
- **契約への影響**: 影響なし（スキーマやインターフェース変更なし）
- **観測性/テストへの影響**: 変更なし（ドキュメント確認のみ）

## 成功基準 *(必須)*

### 測定可能な成果

- **SC-001**: 既存ドキュメント内の絶対条件を100%一覧化し参照元を明記する
- **SC-002**: 新規提案1件の整合判断が10分以内で完了できる
- **SC-003**: 検出された矛盾に対して100%ステータス（未決/解決/要判断）が付与される
- **SC-004**: 未決事項一覧が最新化され、確認時点で抜け漏れがないことが検証できる
